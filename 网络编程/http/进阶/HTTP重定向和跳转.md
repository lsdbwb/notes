# 重定向和跳转的概念
HTTP传输的是超文本，超文本里面可以含有超链接（可以从一个”超文本“跳转到另一个“超文本”）

**主动跳转：**
点击超链接，浏览器重新发送一条HTTP请求

**重定向（被动跳转）：**
服务器发起，浏览器无法控制

# 重定向的过程
重定向时，客户端需要发送两次HTTP请求

1. 发送第一次HTTP请求，服务端返回响应报文，状态码设置为301或者302，并且使用*Location字段*来标记要求重定向URI
2. 浏览器收到301/302的响应报文后，就会检查有没有*Location*字段。如果有，就会从字段值里面提取出URI，发出第二次新的HTTP请求

重定向URI可以使用相对URI（站内跳转），也可以使用绝对URI（站外跳转）

# 重定向状态码
**301**俗称“永久重定向”（Moved Permanently），意思是原URI已经“永久”性地不存在了，今后的所有请求都必须改用新的URI。

浏览器看到301，就知道原来的URI“过时”了，就会做适当的优化。比如历史记录、更新书签，下次可能就会直接用新的URI访问，省去了再次跳转的成本。搜索引擎的爬虫看到301，也会更新索引库，*不再使用老的URI*。

**302**俗称“临时重定向”（“Moved Temporarily”），意思是原URI处于“临时维护”状态，新的URI是起“顶包”作用的“临时工”。

浏览器或者爬虫看到302，会认为原来的URI仍然有效，但暂时不可用，所以只会执行简单的跳转页面，不记录新的URI，也不会有其他的多余动作，*下次访问还是用原URI*。

-   303 See Other：类似302，但要求重定向后的请求改为GET方法，访问一个结果页面，避免POST/PUT重复操作；
    
-   307 Temporary Redirect：类似302，但重定向后请求里的方法和实体不允许变动，含义比302更明确；
    
-   308 Permanent Redirect：类似307，不允许重定向后的请求变动，但它是301“永久重定向”的含义。

# 重定向的应用场景
1. 资源不可用，需要用另外一个URI代替

2. 避免重复，让多个网址都指向同一个URI，增加访问入口还不用增加额外的工作量

# 重定向的问题
1. 性能损耗：重定向的机制决定了一次跳转需要两次请求应答

2. 循环跳转：如果重定向的策略设置欠考虑，可能会出现“A=>B=>C=>A”的无限循环。所以HTTP协议特别规定，浏览器必须具有检测“循环跳转”的能力，在发现这种情况时应当停止发送请求并给出错误提示。