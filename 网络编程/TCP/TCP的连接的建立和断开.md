# TCP连接为什么需要建立和断开的过程
## 从分布式共识的层面
>

## 从网络协议栈和TCP本身的层面
TCP是面向连接的、可靠的、基于字节流的传输层通信协议。在不可靠传输的IP层之上构建了可靠的传输。TCP连接并不是通过改变网络层及以下的更底层的通信协议来保证可靠，而是通过自身的设计来保持可靠。

建立一个TCP连接需要通信双方完成以下几个信息的共识：
- socket信息：IP地址和端口号
- 序列号(sequence number)：解决乱序问题
- 窗口大小：用来做流量控制

断开一个TCP连接则是希望通信双方能够正常终止，正常终止至少需要以下条件（对通信的每一方而言）：
- 所有需要接收的报文都已经正常接收完成
- 所有需要发送的报文已经正常发送给对方，并且收到对方的确认
- 其中一方都认为对方肯定会按照上述正常流程来进行

# 建立连接：三次握手


# 关闭连接：四次挥手