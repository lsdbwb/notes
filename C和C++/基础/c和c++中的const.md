# 概念
如果变量声明中带有const关键字，则不能通过赋值，增量或者减量运算来修改该变量的值

# C中的const
**修饰简单变量和数组：**
```c++
const int x = 10; //不能修改x
const int array[10]; //不能修改array里的所有数据
```
可以在const变量声明时进行初始化，如果不进行初始化，编译器会赋予该常量默认值。

**修饰指针：**
- 指向常量的指针
```c++
const float* ptr; // ptr指向的值不能变
// ptr本身可以改变，即可以指向别的值
```
- 常量指针
```c++
float* const ptr; // ptr存的地址不能变，ptr指向的变量的值可以变
```
- 当然也可以有指向常量的常量指针
```c++
const float* const ptr;
```

**修饰函数形参：**
```c++
void func(const int* x);//x指向的值不能在函数内部被修改
```

**修饰函数返回值**
```c++
// 修饰函数返回值时没有什么作用,因为返回值是个临时变量，传给x后就被销毁了
const int func();  

int x = func(); 
x = 10;
```

## 对全局数据使用const
对全局数据使用const修饰可以保护数据不被修改

在文件之间共享const变量时要小心
- 遵循外部变量的惯例，只能在一个文件中定义一次，然后在其他文件中使用extern声明多次
- 还可以配合static关键字一同使用
```c++
//在xx.h中定义具有静态存储期的常量
static const int x = 3;
// 其他需要使用x的都include "xx.h"
```
因为static是内部链接属性，只在本文件可见，include多次相当于对x进行了多次拷贝，每个文件里的x都是独立存储的，但是因为是const常量，所以可以这样使用（不用每次使用时都显式extern）


# C++中的const
- const可以修饰一个对象：
```c++
const Class_Name Object_name; //该对象的成员变量不能被改变
```
必须在定义时被初始化
此时只能调用const修饰的常量成员函数

- const可以修饰成员变量：
类中的成员变量为只读，不能够被修改（包括在类外部和类内部）。

const 成员变量**必须被初始化**（在相关构造函数的**初始化列表中**），**初始化后，不能够被修改**。

静态 const 成员变量**需要在类外部单独定义并初始化（可定义在头文件）**

- const 成员函数：
const成员函数指的是，此函数不应该修改任何成员变量。

传给const成员函数的this指针，是**指向 const 对象 的 const 指针**。

const成员函数，不能够修改任何成员变量，**除非成员变量被 mutable 修饰符修饰**。


# 总结
![[Pasted image 20220620171807.png]]